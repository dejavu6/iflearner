
<!DOCTYPE html>

<html class="no-js" lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width,initial-scale=1" name="viewport"/>
<meta content="Document for Iflearner" name="description"/>
<meta content="iFLYTEK Turing Group" name="author"/>
<link href="https://iflytek.github.io/iflearner/quick_start/quickstart_smpc/" rel="canonical"/>
<link href="../../assets/images/favicon.png" rel="icon"/>
<meta content="mkdocs-1.3.0, mkdocs-material-8.3.8" name="generator"/>
<title>Quickstart SMPC - Iflearner Documents</title>
<link href="../../assets/stylesheets/main.1d29e8d0.min.css" rel="stylesheet"/>
<link href="../../assets/stylesheets/palette.cbb835fc.min.css" rel="stylesheet"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&amp;display=fallback" rel="stylesheet"/>
<style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
<link href="../../assets/_mkdocstrings.css" rel="stylesheet"/>
<link href="../../css/style.css" rel="stylesheet"/>
<link href="../../css/material.css" rel="stylesheet"/>
<link href="../../css/iflearner.css" rel="stylesheet"/>
<link href="../../assets/css/swagger-ui.css" rel="stylesheet"/>
<script>__md_scope=new URL("../..",location),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-147297392-7","auto"),ga("set","anonymizeIp",!0),ga("send","pageview"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){var e;this.value&&(e=document.location.pathname,ga("send","pageview",e+"?q="+this.value))}),"undefined"!=typeof location$&&location$.subscribe(function(e){ga("send","pageview",e.pathname)})})</script>
<script async="" src="https://www.google-analytics.com/analytics.js"></script>
</head>
<body data-md-color-accent="" data-md-color-primary="" data-md-color-scheme="default" dir="ltr">
<script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
<input autocomplete="off" class="md-toggle" data-md-toggle="drawer" id="__drawer" type="checkbox"/>
<input autocomplete="off" class="md-toggle" data-md-toggle="search" id="__search" type="checkbox"/>
<label class="md-overlay" for="__drawer"></label>
<div data-md-component="skip">
<a class="md-skip" href="#quickstart-smpc">
          Skip to content
        </a>
</div>
<div data-md-component="announce">
</div>
<header class="md-header" data-md-component="header">
<nav aria-label="Header" class="md-header__inner md-grid">
<a aria-label="Iflearner Documents" class="md-header__button md-logo" data-md-component="logo" href="../.." title="Iflearner Documents">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"></path></svg>
</a>
<label class="md-header__button md-icon" for="__drawer">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"></path></svg>
</label>
<div class="md-header__title" data-md-component="header-title">
<div class="md-header__ellipsis">
<div class="md-header__topic">
<span class="md-ellipsis">
            Iflearner Documents
          </span>
</div>
<div class="md-header__topic" data-md-component="header-topic">
<span class="md-ellipsis">
            
              Quickstart SMPC
            
          </span>
</div>
</div>
</div>
<form class="md-header__option" data-md-component="palette">
<input aria-label="暗色模式" class="md-option" data-md-color-accent="" data-md-color-media="(prefers-color-scheme: light)" data-md-color-primary="" data-md-color-scheme="default" id="__palette_1" name="__palette" type="radio"/>
<label class="md-header__button md-icon" for="__palette_2" hidden="" title="暗色模式">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3 3.19.09m3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95 2.06.05m-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31Z"></path></svg>
</label>
<input aria-label="亮色模式" class="md-option" data-md-color-accent="" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-primary="teal" data-md-color-scheme="slate" id="__palette_2" name="__palette" type="radio"/>
<label class="md-header__button md-icon" for="__palette_1" hidden="" title="亮色模式">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5c-.84 0-1.65.15-2.39.42L12 2M3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29L3.34 7m.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14L3.36 17M20.65 7l-1.77 3.79a7.023 7.023 0 0 0-2.38-4.15l4.15.36m-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29L20.64 17M12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44L12 22Z"></path></svg>
</label>
</form>
<div class="md-header__option">
<div class="md-select">
<button aria-label="Select language" class="md-header__button md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="m12.87 15.07-2.54-2.51.03-.03A17.52 17.52 0 0 0 14.07 6H17V4h-7V2H8v2H1v2h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04M18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12m-2.62 7 1.62-4.33L19.12 17h-3.24Z"></path></svg>
</button>
<div class="md-select__inner">
<ul class="md-select__list">
<li class="md-select__item">
<a class="md-select__link" href="/quick_start/quickstart_smpc/" hreflang="en">
                    English
                  </a>
</li>
<li class="md-select__item">
<a class="md-select__link" href="../../zh/quick_start/quickstart_smpc/" hreflang="zh">
                    中文
                  </a>
</li>
</ul>
</div>
</div>
</div>
<label class="md-header__button md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"></path></svg>
</label>
<div class="md-search" data-md-component="search" role="dialog">
<label class="md-search__overlay" for="__search"></label>
<div class="md-search__inner" role="search">
<form class="md-search__form" name="search">
<input aria-label="Search" autocapitalize="off" autocomplete="off" autocorrect="off" class="md-search__input" data-md-component="search-query" name="query" placeholder="Search" required="" spellcheck="false" type="text"/>
<label class="md-search__icon md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"></path></svg>
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"></path></svg>
</label>
<nav aria-label="Search" class="md-search__options">
<a aria-label="Share" class="md-search__icon md-icon" data-clipboard="" data-clipboard-text="" data-md-component="search-share" href="javascript:void(0)" tabindex="-1">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08Z"></path></svg>
</a>
<button aria-label="Clear" class="md-search__icon md-icon" tabindex="-1" type="reset">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"></path></svg>
</button>
</nav>
<div class="md-search__suggest" data-md-component="search-suggest"></div>
</form>
<div class="md-search__output">
<div class="md-search__scrollwrap" data-md-scrollfix="">
<div class="md-search-result" data-md-component="search-result">
<div class="md-search-result__meta">
            Initializing search
          </div>
<ol class="md-search-result__list"></ol>
</div>
</div>
</div>
</div>
</div>
<div class="md-header__source">
<a class="md-source" data-md-component="source" href="https://github.com/iflytek/iflearner" title="Go to repository">
<div class="md-source__icon md-icon">
<svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"></path></svg>
</div>
<div class="md-source__repository">
    iflearner
  </div>
</a>
</div>
</nav>
</header>
<div class="md-container" data-md-component="container">
<nav aria-label="Tabs" class="md-tabs" data-md-component="tabs">
<div class="md-tabs__inner md-grid">
<ul class="md-tabs__list">
<li class="md-tabs__item">
<a class="md-tabs__link" href="../..">
      Home
    </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link md-tabs__link--active" href="../installation/">
        QuickStart
      </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../tutorial/argument/">
        Tutorial
      </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../api/api_reference/">
        API
      </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../about/changelog/">
        About
      </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../faq/faq/">
        FAQ
      </a>
</li>
</ul>
</div>
</nav>
<main class="md-main" data-md-component="main">
<div class="md-main__inner md-grid">
<div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Navigation" class="md-nav md-nav--primary md-nav--lifted" data-md-level="0">
<label class="md-nav__title" for="__drawer">
<a aria-label="Iflearner Documents" class="md-nav__button md-logo" data-md-component="logo" href="../.." title="Iflearner Documents">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"></path></svg>
</a>
    Iflearner Documents
  </label>
<div class="md-nav__source">
<a class="md-source" data-md-component="source" href="https://github.com/iflytek/iflearner" title="Go to repository">
<div class="md-source__icon md-icon">
<svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"></path></svg>
</div>
<div class="md-source__repository">
    iflearner
  </div>
</a>
</div>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../..">
        Home
      </a>
</li>
<li class="md-nav__item md-nav__item--active md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" id="__nav_2" type="checkbox"/>
<label class="md-nav__link" for="__nav_2">
          QuickStart
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="QuickStart" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_2">
<span class="md-nav__icon md-icon"></span>
          QuickStart
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../installation/">
        Installation
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../quickstart_pytorch/">
        Quickstart Pytorch
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../quickstart_tensorflow/">
        Quickstart Tensorflow
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../quickstart_mxnet/">
        Quickstart Mxnet
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../quickstart_keras/">
        Quickstart Keras
      </a>
</li>
<li class="md-nav__item md-nav__item--active">
<input class="md-nav__toggle md-toggle" data-md-toggle="toc" id="__toc" type="checkbox"/>
<label class="md-nav__link md-nav__link--active" for="__toc">
          Quickstart SMPC
          <span class="md-nav__icon md-icon"></span>
</label>
<a class="md-nav__link md-nav__link--active" href="./">
        Quickstart SMPC
      </a>
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#quickstart-smpc">
    Quickstart (SMPC)
  </a>
<nav aria-label="Quickstart (SMPC)" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#ifleaner-client">
    Ifleaner Client
  </a>
<nav aria-label="Ifleaner Client" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#1-define-model-network">
    1. Define Model Network
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#2-implement-trainer-class">
    2. Implement Trainer Class
  </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../quickstart_opacus/">
        Quickstart Opacus
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" id="__nav_3" type="checkbox"/>
<label class="md-nav__link" for="__nav_3">
          Tutorial
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Tutorial" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_3">
<span class="md-nav__icon md-icon"></span>
          Tutorial
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../tutorial/argument/">
        Startup Option
      </a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_2" id="__nav_3_2" type="checkbox"/>
<label class="md-nav__link" for="__nav_3_2">
          Strategy
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Strategy" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_3_2">
<span class="md-nav__icon md-icon"></span>
          Strategy
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../tutorial/custom_aggregation_strategy/">
        Custom Aggregation Strategy
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../tutorial/strategy/fedopt/">
        Fedopt Strategy
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../tutorial/strategy/qfedavg/">
        Qfedavg Strategy
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../tutorial/strategy/fednova/">
        FedNova Strategy
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../tutorial/contributor_guide/">
        Contributor Guide
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../tutorial/run_in_container/">
        Run In Container
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../tutorial/metrics_visualization/">
        Metrics Visualization
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" id="__nav_4" type="checkbox"/>
<label class="md-nav__link" for="__nav_4">
          API
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="API" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_4">
<span class="md-nav__icon md-icon"></span>
          API
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../api/api_reference/">
        API REFERENCE
      </a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_2" id="__nav_4_2" type="checkbox"/>
<label class="md-nav__link" for="__nav_4_2">
          Code Reference
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Code Reference" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_4_2">
<span class="md-nav__icon md-icon"></span>
          Code Reference
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_2_1" id="__nav_4_2_1" type="checkbox"/>
<label class="md-nav__link" for="__nav_4_2_1">
          iflearner
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="iflearner" class="md-nav" data-md-level="3">
<label class="md-nav__title" for="__nav_4_2_1">
<span class="md-nav__icon md-icon"></span>
          iflearner
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_2_1_1" id="__nav_4_2_1_1" type="checkbox"/>
<label class="md-nav__link" for="__nav_4_2_1_1">
          business
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="business" class="md-nav" data-md-level="4">
<label class="md-nav__title" for="__nav_4_2_1_1">
<span class="md-nav__icon md-icon"></span>
          business
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_2_1_1_1" id="__nav_4_2_1_1_1" type="checkbox"/>
<label class="md-nav__link" for="__nav_4_2_1_1_1">
          homo
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="homo" class="md-nav" data-md-level="5">
<label class="md-nav__title" for="__nav_4_2_1_1_1">
<span class="md-nav__icon md-icon"></span>
          homo
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../api/reference/business/homo/trainer/">
        trainer
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../api/reference/business/homo/train_client/">
        train_client
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../api/reference/business/homo/aggregate_server/">
        aggregate_server
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../api/reference/business/homo/pytorch_trainer/">
        pytorch_trainer
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../api/reference/business/homo/tensorflow_trainer/">
        tensorflow_trainer
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../api/reference/business/homo/mxnet_trainer/">
        mxnet_trainer
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../api/reference/business/homo/keras_trainer/">
        keras_trainer
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../api/reference/business/homo/argument/">
        argument
      </a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_2_1_1_1_9" id="__nav_4_2_1_1_1_9" type="checkbox"/>
<label class="md-nav__link" for="__nav_4_2_1_1_1_9">
          strategy
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="strategy" class="md-nav" data-md-level="6">
<label class="md-nav__title" for="__nav_4_2_1_1_1_9">
<span class="md-nav__icon md-icon"></span>
          strategy
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../api/reference/business/homo/strategy/strategy_server/">
        strategy_server
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../api/reference/business/homo/strategy/strategy_client/">
        strategy_client
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../api/reference/business/homo/strategy/fedavg_client/">
        fedavg_client
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../api/reference/business/homo/strategy/fedavg_server/">
        fedavg_server
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../api/reference/business/homo/strategy/qfedavg_client/">
        qfedavg_client
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../api/reference/business/homo/strategy/qfedavg_server/">
        qfedavg_server
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../api/reference/business/homo/strategy/fednova_server/">
        fednova_server
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../api/reference/business/homo/strategy/fednova_client/">
        fednova_client
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../api/reference/business/homo/strategy/fedopt_server/">
        fedopt_server
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../api/reference/business/homo/strategy/fedopt_client/">
        fedopt_client
      </a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_2_1_1_1_9_11" id="__nav_4_2_1_1_1_9_11" type="checkbox"/>
<label class="md-nav__link" for="__nav_4_2_1_1_1_9_11">
          opt
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="opt" class="md-nav" data-md-level="7">
<label class="md-nav__title" for="__nav_4_2_1_1_1_9_11">
<span class="md-nav__icon md-icon"></span>
          opt
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../api/reference/business/homo/strategy/opt/fedadagrad/">
        fedadagrad
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../api/reference/business/homo/strategy/opt/fedadam/">
        fedadam
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../api/reference/business/homo/strategy/opt/fedavgm/">
        fedavgm
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../api/reference/business/homo/strategy/opt/fedopt/">
        fedopt
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../api/reference/business/homo/strategy/opt/fedyogi/">
        fedyogi
      </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_2_1_2" id="__nav_4_2_1_2" type="checkbox"/>
<label class="md-nav__link" for="__nav_4_2_1_2">
          communication
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="communication" class="md-nav" data-md-level="4">
<label class="md-nav__title" for="__nav_4_2_1_2">
<span class="md-nav__icon md-icon"></span>
          communication
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_2_1_2_1" id="__nav_4_2_1_2_1" type="checkbox"/>
<label class="md-nav__link" for="__nav_4_2_1_2_1">
          base
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="base" class="md-nav" data-md-level="5">
<label class="md-nav__title" for="__nav_4_2_1_2_1">
<span class="md-nav__icon md-icon"></span>
          base
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../api/reference/communication/base/base_client/">
        base_client
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../api/reference/communication/base/base_server/">
        base_server
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../api/reference/communication/base/base_exception/">
        base_exception
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_2_1_2_2" id="__nav_4_2_1_2_2" type="checkbox"/>
<label class="md-nav__link" for="__nav_4_2_1_2_2">
          homo
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="homo" class="md-nav" data-md-level="5">
<label class="md-nav__title" for="__nav_4_2_1_2_2">
<span class="md-nav__icon md-icon"></span>
          homo
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../api/reference/communication/homo/homo_server/">
        homo_server
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../api/reference/communication/homo/homo_client/">
        homo_client
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../api/reference/communication/homo/homo_exception/">
        homo_exception
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../api/reference/communication/homo/message_type/">
        message_type
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_2_1_2_3" id="__nav_4_2_1_2_3" type="checkbox"/>
<label class="md-nav__link" for="__nav_4_2_1_2_3">
          peer
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="peer" class="md-nav" data-md-level="5">
<label class="md-nav__title" for="__nav_4_2_1_2_3">
<span class="md-nav__icon md-icon"></span>
          peer
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../api/reference/communication/peer/aes/">
        aes
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../api/reference/communication/peer/diffie_hellman/">
        diffie_hellman
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../api/reference/communication/peer/diffie_hellman_inst/">
        diffie_hellman_inst
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../api/reference/communication/peer/peer_server/">
        peer_server
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../api/reference/communication/peer/peer_client/">
        peer_client
      </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5" id="__nav_5" type="checkbox"/>
<label class="md-nav__link" for="__nav_5">
          About
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="About" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_5">
<span class="md-nav__icon md-icon"></span>
          About
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../about/changelog/">
        ChangeLog
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../about/contact/">
        Contact Us
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6" id="__nav_6" type="checkbox"/>
<label class="md-nav__link" for="__nav_6">
          FAQ
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="FAQ" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_6">
<span class="md-nav__icon md-icon"></span>
          FAQ
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../faq/faq/">
        Deploy
      </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#quickstart-smpc">
    Quickstart (SMPC)
  </a>
<nav aria-label="Quickstart (SMPC)" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#ifleaner-client">
    Ifleaner Client
  </a>
<nav aria-label="Ifleaner Client" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#1-define-model-network">
    1. Define Model Network
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#2-implement-trainer-class">
    2. Implement Trainer Class
  </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-content" data-md-component="content">
<article class="md-content__inner md-typeset">
<a class="md-content__button md-icon" href="https://github.com/iflytek/iflearner/edit/master/docs/quick_start/quickstart_smpc.md" title="Edit this page">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25Z"></path></svg>
</a>
<h1>Quickstart SMPC</h1>
<h2 id="quickstart-smpc">Quickstart (SMPC)<a class="headerlink" href="#quickstart-smpc" title="Permanent link">¶</a></h2>
<p>In this tutorial, we will describe how to use IFLeaner to complete image classification federated training under the MNIST dataset with SMPC.</p>
<p>our example contains two clients and one server by default. In each round of training, 
the client is responsible for training and uploading the model parameters to the server, the server
aggregates, and sends the aggregated global model parameters to each client, and then each client 
updates the aggregated model parameters. Multiple rounds will be repeated.</p>
<p>First of all, we highly recommend to create a python virtual environment to run, you can use virtual tools such as virtualenv, pyenv, conda, etc.</p>
<p>Next, we can quickly install the IFLearner library with the following command:
<div class="highlight"><pre><span></span><code><a href="#__codelineno-0-1" id="__codelineno-0-1" name="__codelineno-0-1"></a>pip install iflearner
<a href="#__codelineno-0-2" id="__codelineno-0-2" name="__codelineno-0-2"></a><span class="sb">````</span>
<a href="#__codelineno-0-3" id="__codelineno-0-3" name="__codelineno-0-3"></a>
<a href="#__codelineno-0-4" id="__codelineno-0-4" name="__codelineno-0-4"></a>Also, since we want to use PyTorch <span class="k">for</span> image classification tasks on MNIST data, we need to go ahead and install the PyTorch and torchvision libraries:
<a href="#__codelineno-0-5" id="__codelineno-0-5" name="__codelineno-0-5"></a><span class="sb">```</span>shell
<a href="#__codelineno-0-6" id="__codelineno-0-6" name="__codelineno-0-6"></a>pip install <span class="nv">torch</span><span class="o">==</span><span class="m">1</span>.7.1 <span class="nv">torchvision</span><span class="o">==</span><span class="m">0</span>.8.2
<a href="#__codelineno-0-7" id="__codelineno-0-7" name="__codelineno-0-7"></a><span class="sb">````</span>
<a href="#__codelineno-0-8" id="__codelineno-0-8" name="__codelineno-0-8"></a>
<a href="#__codelineno-0-9" id="__codelineno-0-9" name="__codelineno-0-9"></a><span class="c1">### Ifleaner Server</span>
<a href="#__codelineno-0-10" id="__codelineno-0-10" name="__codelineno-0-10"></a>
<a href="#__codelineno-0-11" id="__codelineno-0-11" name="__codelineno-0-11"></a><span class="m">1</span>.  Create a new file named <span class="sb">`</span>server.py<span class="sb">`</span>, import iflearner:
<a href="#__codelineno-0-12" id="__codelineno-0-12" name="__codelineno-0-12"></a><span class="sb">```</span>python
<a href="#__codelineno-0-13" id="__codelineno-0-13" name="__codelineno-0-13"></a>from iflearner.business.homo.aggregate_server import main
<a href="#__codelineno-0-14" id="__codelineno-0-14" name="__codelineno-0-14"></a>
<a href="#__codelineno-0-15" id="__codelineno-0-15" name="__codelineno-0-15"></a><span class="k">if</span> <span class="nv">__name__</span> <span class="o">==</span> <span class="s2">"__main__"</span>:
<a href="#__codelineno-0-16" id="__codelineno-0-16" name="__codelineno-0-16"></a>    main<span class="o">()</span>
</code></pre></div></p>
<ol>
<li>You can start the server with the follow command:
<div class="highlight"><pre><span></span><code><a href="#__codelineno-1-1" id="__codelineno-1-1" name="__codelineno-1-1"></a>python server.py -n <span class="m">2</span>
</code></pre></div><blockquote>
<p>-n 2: Receive two clients for federated training</p>
</blockquote>
</li>
</ol>
<h3 id="ifleaner-client">Ifleaner Client<a class="headerlink" href="#ifleaner-client" title="Permanent link">¶</a></h3>
<p>Create a new file named <code>quickstart_pytorch.py</code> and do the following.</p>
<h4 id="1-define-model-network">1. Define Model Network<a class="headerlink" href="#1-define-model-network" title="Permanent link">¶</a></h4>
<p>Firstly, you need define your model network by using PyTorch.</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-2-1" id="__codelineno-2-1" name="__codelineno-2-1"></a><span class="kn">from</span> <span class="nn">torch</span> <span class="kn">import</span> <span class="n">nn</span>
<a href="#__codelineno-2-2" id="__codelineno-2-2" name="__codelineno-2-2"></a><span class="kn">import</span> <span class="nn">torch.nn.functional</span> <span class="k">as</span> <span class="nn">F</span>
<a href="#__codelineno-2-3" id="__codelineno-2-3" name="__codelineno-2-3"></a>
<a href="#__codelineno-2-4" id="__codelineno-2-4" name="__codelineno-2-4"></a><span class="k">class</span> <span class="nc">Model</span><span class="p">(</span><span class="n">nn</span><span class="o">.</span><span class="n">Module</span><span class="p">):</span>
<a href="#__codelineno-2-5" id="__codelineno-2-5" name="__codelineno-2-5"></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">num_channels</span><span class="p">,</span> <span class="n">num_classes</span><span class="p">):</span>
<a href="#__codelineno-2-6" id="__codelineno-2-6" name="__codelineno-2-6"></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
<a href="#__codelineno-2-7" id="__codelineno-2-7" name="__codelineno-2-7"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">conv1</span> <span class="o">=</span> <span class="n">nn</span><span class="o">.</span><span class="n">Conv2d</span><span class="p">(</span><span class="n">num_channels</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="n">kernel_size</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
<a href="#__codelineno-2-8" id="__codelineno-2-8" name="__codelineno-2-8"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">conv2</span> <span class="o">=</span> <span class="n">nn</span><span class="o">.</span><span class="n">Conv2d</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="n">kernel_size</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
<a href="#__codelineno-2-9" id="__codelineno-2-9" name="__codelineno-2-9"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">conv2_drop</span> <span class="o">=</span> <span class="n">nn</span><span class="o">.</span><span class="n">Dropout2d</span><span class="p">()</span>
<a href="#__codelineno-2-10" id="__codelineno-2-10" name="__codelineno-2-10"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">fc1</span> <span class="o">=</span> <span class="n">nn</span><span class="o">.</span><span class="n">Linear</span><span class="p">(</span><span class="mi">320</span><span class="p">,</span> <span class="mi">50</span><span class="p">)</span>
<a href="#__codelineno-2-11" id="__codelineno-2-11" name="__codelineno-2-11"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">fc2</span> <span class="o">=</span> <span class="n">nn</span><span class="o">.</span><span class="n">Linear</span><span class="p">(</span><span class="mi">50</span><span class="p">,</span> <span class="n">num_classes</span><span class="p">)</span>
<a href="#__codelineno-2-12" id="__codelineno-2-12" name="__codelineno-2-12"></a>
<a href="#__codelineno-2-13" id="__codelineno-2-13" name="__codelineno-2-13"></a>    <span class="k">def</span> <span class="nf">forward</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">):</span>
<a href="#__codelineno-2-14" id="__codelineno-2-14" name="__codelineno-2-14"></a>        <span class="n">x</span> <span class="o">=</span> <span class="n">F</span><span class="o">.</span><span class="n">relu</span><span class="p">(</span><span class="n">F</span><span class="o">.</span><span class="n">max_pool2d</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">conv1</span><span class="p">(</span><span class="n">x</span><span class="p">),</span> <span class="mi">2</span><span class="p">))</span>
<a href="#__codelineno-2-15" id="__codelineno-2-15" name="__codelineno-2-15"></a>        <span class="n">x</span> <span class="o">=</span> <span class="n">F</span><span class="o">.</span><span class="n">relu</span><span class="p">(</span><span class="n">F</span><span class="o">.</span><span class="n">max_pool2d</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">conv2_drop</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">conv2</span><span class="p">(</span><span class="n">x</span><span class="p">)),</span> <span class="mi">2</span><span class="p">))</span>
<a href="#__codelineno-2-16" id="__codelineno-2-16" name="__codelineno-2-16"></a>        <span class="n">x</span> <span class="o">=</span> <span class="n">x</span><span class="o">.</span><span class="n">view</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">x</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">*</span><span class="n">x</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">*</span><span class="n">x</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span>
<a href="#__codelineno-2-17" id="__codelineno-2-17" name="__codelineno-2-17"></a>        <span class="n">x</span> <span class="o">=</span> <span class="n">F</span><span class="o">.</span><span class="n">relu</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fc1</span><span class="p">(</span><span class="n">x</span><span class="p">))</span>
<a href="#__codelineno-2-18" id="__codelineno-2-18" name="__codelineno-2-18"></a>        <span class="n">x</span> <span class="o">=</span> <span class="n">F</span><span class="o">.</span><span class="n">dropout</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">training</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">training</span><span class="p">)</span>
<a href="#__codelineno-2-19" id="__codelineno-2-19" name="__codelineno-2-19"></a>        <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fc2</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<a href="#__codelineno-2-20" id="__codelineno-2-20" name="__codelineno-2-20"></a>        <span class="k">return</span> <span class="n">F</span><span class="o">.</span><span class="n">log_softmax</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">dim</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</code></pre></div>
<h4 id="2-implement-trainer-class">2. Implement Trainer Class<a class="headerlink" href="#2-implement-trainer-class" title="Permanent link">¶</a></h4>
<p>Secondly, you need implement your trainer class, inheriting from the <code>iflearner.business.homo.trainer.Trainer</code> class. 
The class need to implement four functions, which are <code>get</code>, <code>set</code>, <code>fit</code> and <code>evaluate</code>. 
We also have provided a <code>iflearner.business.homo.pytorch_trainer.PyTorchTrainer</code> inheriting from the <code>iflearner.business.homo.trainer.Trainer</code> class, which has implement usual <code>get</code> and <code>set</code> functions.</p>
<p>You can use this class as the follow:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-3-1" id="__codelineno-3-1" name="__codelineno-3-1"></a><span class="kn">import</span> <span class="nn">torch</span>
<a href="#__codelineno-3-2" id="__codelineno-3-2" name="__codelineno-3-2"></a><span class="kn">import</span> <span class="nn">torch.optim</span> <span class="k">as</span> <span class="nn">optim</span>
<a href="#__codelineno-3-3" id="__codelineno-3-3" name="__codelineno-3-3"></a><span class="kn">import</span> <span class="nn">torch.nn.functional</span> <span class="k">as</span> <span class="nn">F</span>
<a href="#__codelineno-3-4" id="__codelineno-3-4" name="__codelineno-3-4"></a><span class="kn">from</span> <span class="nn">torchvision</span> <span class="kn">import</span> <span class="n">datasets</span><span class="p">,</span> <span class="n">transforms</span>
<a href="#__codelineno-3-5" id="__codelineno-3-5" name="__codelineno-3-5"></a><span class="kn">from</span> <span class="nn">iflearner.business.homo.train_client</span> <span class="kn">import</span> <span class="n">Controller</span>
<a href="#__codelineno-3-6" id="__codelineno-3-6" name="__codelineno-3-6"></a><span class="kn">from</span> <span class="nn">iflearner.business.homo.pytorch_trainer</span> <span class="kn">import</span> <span class="n">PyTorchTrainer</span>
<a href="#__codelineno-3-7" id="__codelineno-3-7" name="__codelineno-3-7"></a>
<a href="#__codelineno-3-8" id="__codelineno-3-8" name="__codelineno-3-8"></a><span class="k">class</span> <span class="nc">Mnist</span><span class="p">(</span><span class="n">PyTorchTrainer</span><span class="p">):</span>
<a href="#__codelineno-3-9" id="__codelineno-3-9" name="__codelineno-3-9"></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lr</span><span class="o">=</span><span class="mf">0.15</span><span class="p">,</span> <span class="n">momentum</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<a href="#__codelineno-3-10" id="__codelineno-3-10" name="__codelineno-3-10"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_lr</span> <span class="o">=</span> <span class="n">lr</span>
<a href="#__codelineno-3-11" id="__codelineno-3-11" name="__codelineno-3-11"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_device</span> <span class="o">=</span> <span class="n">torch</span><span class="o">.</span><span class="n">device</span><span class="p">(</span><span class="s2">"cuda"</span><span class="p">)</span> <span class="k">if</span> <span class="n">torch</span><span class="o">.</span><span class="n">cuda</span><span class="o">.</span><span class="n">is_available</span><span class="p">()</span> <span class="k">else</span> <span class="n">torch</span><span class="o">.</span><span class="n">device</span><span class="p">(</span><span class="s2">"cpu"</span><span class="p">)</span>
<a href="#__codelineno-3-12" id="__codelineno-3-12" name="__codelineno-3-12"></a>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">'device: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_device</span><span class="si">}</span><span class="s1">'</span><span class="p">)</span>
<a href="#__codelineno-3-13" id="__codelineno-3-13" name="__codelineno-3-13"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_model</span> <span class="o">=</span> <span class="n">Model</span><span class="p">(</span><span class="n">num_channels</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">num_classes</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_device</span><span class="p">)</span>
<a href="#__codelineno-3-14" id="__codelineno-3-14" name="__codelineno-3-14"></a>
<a href="#__codelineno-3-15" id="__codelineno-3-15" name="__codelineno-3-15"></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="p">)</span>
<a href="#__codelineno-3-16" id="__codelineno-3-16" name="__codelineno-3-16"></a>
<a href="#__codelineno-3-17" id="__codelineno-3-17" name="__codelineno-3-17"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_optimizer</span> <span class="o">=</span> <span class="n">optim</span><span class="o">.</span><span class="n">SGD</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="o">.</span><span class="n">parameters</span><span class="p">(),</span> <span class="n">lr</span><span class="o">=</span><span class="n">lr</span><span class="p">,</span> <span class="n">momentum</span><span class="o">=</span><span class="n">momentum</span><span class="p">)</span>
<a href="#__codelineno-3-18" id="__codelineno-3-18" name="__codelineno-3-18"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_loss</span> <span class="o">=</span> <span class="n">F</span><span class="o">.</span><span class="n">nll_loss</span>
<a href="#__codelineno-3-19" id="__codelineno-3-19" name="__codelineno-3-19"></a>
<a href="#__codelineno-3-20" id="__codelineno-3-20" name="__codelineno-3-20"></a>        <span class="n">apply_transform</span> <span class="o">=</span> <span class="n">transforms</span><span class="o">.</span><span class="n">Compose</span><span class="p">([</span><span class="n">transforms</span><span class="o">.</span><span class="n">ToTensor</span><span class="p">(),</span> <span class="n">transforms</span><span class="o">.</span><span class="n">Normalize</span><span class="p">((</span><span class="mf">0.1307</span><span class="p">,),</span> <span class="p">(</span><span class="mf">0.3081</span><span class="p">,))])</span>
<a href="#__codelineno-3-21" id="__codelineno-3-21" name="__codelineno-3-21"></a>        <span class="n">train_dataset</span> <span class="o">=</span> <span class="n">datasets</span><span class="o">.</span><span class="n">MNIST</span><span class="p">(</span><span class="s2">"./data"</span><span class="p">,</span> <span class="n">train</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">download</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">transform</span><span class="o">=</span><span class="n">apply_transform</span><span class="p">)</span>
<a href="#__codelineno-3-22" id="__codelineno-3-22" name="__codelineno-3-22"></a>        <span class="n">test_dataset</span> <span class="o">=</span> <span class="n">datasets</span><span class="o">.</span><span class="n">MNIST</span><span class="p">(</span><span class="s2">"./data"</span><span class="p">,</span> <span class="n">train</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">download</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">transform</span><span class="o">=</span><span class="n">apply_transform</span><span class="p">)</span>
<a href="#__codelineno-3-23" id="__codelineno-3-23" name="__codelineno-3-23"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_train_data</span> <span class="o">=</span> <span class="n">torch</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">DataLoader</span><span class="p">(</span><span class="n">train_dataset</span><span class="p">,</span> <span class="n">batch_size</span><span class="o">=</span><span class="mi">64</span><span class="p">,</span> <span class="n">shuffle</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a href="#__codelineno-3-24" id="__codelineno-3-24" name="__codelineno-3-24"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_test_data</span> <span class="o">=</span> <span class="n">torch</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">DataLoader</span><span class="p">(</span><span class="n">test_dataset</span><span class="p">,</span> <span class="n">batch_size</span><span class="o">=</span><span class="mi">64</span><span class="p">,</span> <span class="n">shuffle</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<a href="#__codelineno-3-25" id="__codelineno-3-25" name="__codelineno-3-25"></a>
<a href="#__codelineno-3-26" id="__codelineno-3-26" name="__codelineno-3-26"></a>    <span class="k">def</span> <span class="nf">fit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">epoch</span><span class="p">):</span>
<a href="#__codelineno-3-27" id="__codelineno-3-27" name="__codelineno-3-27"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_device</span><span class="p">)</span>
<a href="#__codelineno-3-28" id="__codelineno-3-28" name="__codelineno-3-28"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="o">.</span><span class="n">train</span><span class="p">()</span>
<a href="#__codelineno-3-29" id="__codelineno-3-29" name="__codelineno-3-29"></a>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Epoch: </span><span class="si">{</span><span class="n">epoch</span><span class="si">}</span><span class="s2">, the size of training dataset: </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_train_data</span><span class="o">.</span><span class="n">dataset</span><span class="p">)</span><span class="si">}</span><span class="s2">, batch size: </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_train_data</span><span class="p">)</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
<a href="#__codelineno-3-30" id="__codelineno-3-30" name="__codelineno-3-30"></a>        <span class="k">for</span> <span class="n">batch_idx</span><span class="p">,</span> <span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">target</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_train_data</span><span class="p">):</span>
<a href="#__codelineno-3-31" id="__codelineno-3-31" name="__codelineno-3-31"></a>            <span class="n">data</span><span class="p">,</span> <span class="n">target</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_device</span><span class="p">),</span> <span class="n">target</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_device</span><span class="p">)</span>
<a href="#__codelineno-3-32" id="__codelineno-3-32" name="__codelineno-3-32"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_optimizer</span><span class="o">.</span><span class="n">zero_grad</span><span class="p">()</span>
<a href="#__codelineno-3-33" id="__codelineno-3-33" name="__codelineno-3-33"></a>            <span class="n">output</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<a href="#__codelineno-3-34" id="__codelineno-3-34" name="__codelineno-3-34"></a>            <span class="n">loss</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_loss</span><span class="p">(</span><span class="n">output</span><span class="p">,</span> <span class="n">target</span><span class="p">)</span>
<a href="#__codelineno-3-35" id="__codelineno-3-35" name="__codelineno-3-35"></a>            <span class="n">loss</span><span class="o">.</span><span class="n">backward</span><span class="p">()</span>
<a href="#__codelineno-3-36" id="__codelineno-3-36" name="__codelineno-3-36"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_optimizer</span><span class="o">.</span><span class="n">step</span><span class="p">()</span>
<a href="#__codelineno-3-37" id="__codelineno-3-37" name="__codelineno-3-37"></a>
<a href="#__codelineno-3-38" id="__codelineno-3-38" name="__codelineno-3-38"></a>    <span class="k">def</span> <span class="nf">evaluate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">epoch</span><span class="p">):</span>
<a href="#__codelineno-3-39" id="__codelineno-3-39" name="__codelineno-3-39"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_device</span><span class="p">)</span>
<a href="#__codelineno-3-40" id="__codelineno-3-40" name="__codelineno-3-40"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="o">.</span><span class="n">eval</span><span class="p">()</span>
<a href="#__codelineno-3-41" id="__codelineno-3-41" name="__codelineno-3-41"></a>        <span class="n">test_loss</span> <span class="o">=</span> <span class="mi">0</span>
<a href="#__codelineno-3-42" id="__codelineno-3-42" name="__codelineno-3-42"></a>        <span class="n">correct</span> <span class="o">=</span> <span class="mi">0</span>
<a href="#__codelineno-3-43" id="__codelineno-3-43" name="__codelineno-3-43"></a>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"The size of testing dataset: </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_test_data</span><span class="o">.</span><span class="n">dataset</span><span class="p">)</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
<a href="#__codelineno-3-44" id="__codelineno-3-44" name="__codelineno-3-44"></a>        <span class="k">with</span> <span class="n">torch</span><span class="o">.</span><span class="n">no_grad</span><span class="p">():</span>
<a href="#__codelineno-3-45" id="__codelineno-3-45" name="__codelineno-3-45"></a>            <span class="k">for</span> <span class="n">data</span><span class="p">,</span> <span class="n">target</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_test_data</span><span class="p">:</span>
<a href="#__codelineno-3-46" id="__codelineno-3-46" name="__codelineno-3-46"></a>                <span class="n">data</span><span class="p">,</span> <span class="n">target</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_device</span><span class="p">),</span> <span class="n">target</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_device</span><span class="p">)</span>
<a href="#__codelineno-3-47" id="__codelineno-3-47" name="__codelineno-3-47"></a>                <span class="n">output</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<a href="#__codelineno-3-48" id="__codelineno-3-48" name="__codelineno-3-48"></a>                <span class="n">test_loss</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_loss</span><span class="p">(</span><span class="n">output</span><span class="p">,</span> <span class="n">target</span><span class="p">,</span> <span class="n">reduction</span><span class="o">=</span><span class="s1">'sum'</span><span class="p">)</span><span class="o">.</span><span class="n">item</span><span class="p">()</span>  <span class="c1"># sum up batch loss</span>
<a href="#__codelineno-3-49" id="__codelineno-3-49" name="__codelineno-3-49"></a>                <span class="n">pred</span> <span class="o">=</span> <span class="n">output</span><span class="o">.</span><span class="n">argmax</span><span class="p">(</span><span class="n">dim</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">keepdim</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>  <span class="c1"># get the index of the max log-probability</span>
<a href="#__codelineno-3-50" id="__codelineno-3-50" name="__codelineno-3-50"></a>                <span class="n">correct</span> <span class="o">+=</span> <span class="n">pred</span><span class="o">.</span><span class="n">eq</span><span class="p">(</span><span class="n">target</span><span class="o">.</span><span class="n">view_as</span><span class="p">(</span><span class="n">pred</span><span class="p">))</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span><span class="o">.</span><span class="n">item</span><span class="p">()</span>
<a href="#__codelineno-3-51" id="__codelineno-3-51" name="__codelineno-3-51"></a>        <span class="n">test_loss</span> <span class="o">/=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_test_data</span><span class="o">.</span><span class="n">dataset</span><span class="p">)</span>
<a href="#__codelineno-3-52" id="__codelineno-3-52" name="__codelineno-3-52"></a>
<a href="#__codelineno-3-53" id="__codelineno-3-53" name="__codelineno-3-53"></a>        <span class="nb">print</span><span class="p">(</span><span class="s1">'Test set: Average loss: </span><span class="si">{:.4f}</span><span class="s1">, Accuracy: </span><span class="si">{}</span><span class="s1">/</span><span class="si">{}</span><span class="s1"> (</span><span class="si">{:.2f}</span><span class="s1">%)'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
<a href="#__codelineno-3-54" id="__codelineno-3-54" name="__codelineno-3-54"></a>            <span class="n">test_loss</span><span class="p">,</span> <span class="n">correct</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_test_data</span><span class="o">.</span><span class="n">dataset</span><span class="p">),</span>
<a href="#__codelineno-3-55" id="__codelineno-3-55" name="__codelineno-3-55"></a>            <span class="mf">1.</span>   <span class="o">*</span> <span class="n">correct</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_test_data</span><span class="o">.</span><span class="n">dataset</span><span class="p">)))</span> 
<a href="#__codelineno-3-56" id="__codelineno-3-56" name="__codelineno-3-56"></a>
<a href="#__codelineno-3-57" id="__codelineno-3-57" name="__codelineno-3-57"></a>        <span class="k">return</span> <span class="p">{</span><span class="s1">'loss'</span><span class="p">:</span> <span class="n">test_loss</span><span class="p">,</span> <span class="s1">'acc'</span><span class="p">:</span> <span class="n">correct</span><span class="p">}</span>
<a href="#__codelineno-3-58" id="__codelineno-3-58" name="__codelineno-3-58"></a> <span class="err">```</span>
<a href="#__codelineno-3-59" id="__codelineno-3-59" name="__codelineno-3-59"></a>
<a href="#__codelineno-3-60" id="__codelineno-3-60" name="__codelineno-3-60"></a><span class="c1">#### 3. Start Ifleaner Client</span>
<a href="#__codelineno-3-61" id="__codelineno-3-61" name="__codelineno-3-61"></a>
<a href="#__codelineno-3-62" id="__codelineno-3-62" name="__codelineno-3-62"></a><span class="n">Lastly</span><span class="p">,</span> <span class="n">you</span> <span class="n">need</span> <span class="n">to</span> <span class="n">write</span> <span class="n">a</span> <span class="err">`</span><span class="n">main</span><span class="err">`</span> <span class="n">function</span> <span class="n">to</span> <span class="n">start</span> <span class="n">your</span> <span class="n">client</span><span class="o">.</span> 
<a href="#__codelineno-3-63" id="__codelineno-3-63" name="__codelineno-3-63"></a>
<a href="#__codelineno-3-64" id="__codelineno-3-64" name="__codelineno-3-64"></a><span class="n">You</span> <span class="n">can</span> <span class="n">do</span> <span class="n">it</span> <span class="k">as</span> <span class="n">the</span> <span class="n">follow</span><span class="p">:</span>
<a href="#__codelineno-3-65" id="__codelineno-3-65" name="__codelineno-3-65"></a>
<a href="#__codelineno-3-66" id="__codelineno-3-66" name="__codelineno-3-66"></a><span class="err">```</span><span class="n">python</span>
<a href="#__codelineno-3-67" id="__codelineno-3-67" name="__codelineno-3-67"></a>
<a href="#__codelineno-3-68" id="__codelineno-3-68" name="__codelineno-3-68"></a><span class="kn">from</span> <span class="nn">iflearner.business.homo.argument</span> <span class="kn">import</span> <span class="n">parser</span>
<a href="#__codelineno-3-69" id="__codelineno-3-69" name="__codelineno-3-69"></a>
<a href="#__codelineno-3-70" id="__codelineno-3-70" name="__codelineno-3-70"></a><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">'__main__'</span><span class="p">:</span>
<a href="#__codelineno-3-71" id="__codelineno-3-71" name="__codelineno-3-71"></a>    <span class="n">args</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">()</span>
<a href="#__codelineno-3-72" id="__codelineno-3-72" name="__codelineno-3-72"></a>    <span class="nb">print</span><span class="p">(</span><span class="n">args</span><span class="p">)</span>
<a href="#__codelineno-3-73" id="__codelineno-3-73" name="__codelineno-3-73"></a>
<a href="#__codelineno-3-74" id="__codelineno-3-74" name="__codelineno-3-74"></a>    <span class="n">mnist</span> <span class="o">=</span> <span class="n">Mnist</span><span class="p">()</span>
<a href="#__codelineno-3-75" id="__codelineno-3-75" name="__codelineno-3-75"></a>    <span class="n">controller</span> <span class="o">=</span> <span class="n">Controller</span><span class="p">(</span><span class="n">args</span><span class="p">,</span> <span class="n">mnist</span><span class="p">)</span>
<a href="#__codelineno-3-76" id="__codelineno-3-76" name="__codelineno-3-76"></a>    <span class="n">controller</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</code></pre></div>
<p>In the <code>main</code> function, you need import <code>parser</code> from <code>iflearner.business.homo.argument</code> firstly and then call <code>parser.parse_args</code>, because we provided some common arguments that
need to be parsered. If you want to add addtional arguments for yourself, you can call <code>parser.add_argument</code> repeatedly to add them before <code>parser.parse_args</code>
has been called. After parsered arguments, you can create your trainer instance base on previous implemented class, and put it with <code>args</code> to <code>train_client.Controller</code>. In the end, you just need call <code>controller.run</code> to run your client.</p>
<p>You can use follow command to start the first client:
<div class="highlight"><pre><span></span><code><a href="#__codelineno-4-1" id="__codelineno-4-1" name="__codelineno-4-1"></a>python quickstart_pytorch.py --name client01 --epochs <span class="m">2</span> --server <span class="s2">"0.0.0.0:50001"</span> --peers <span class="s2">"0.0.0.0:50012;0.0.0.0:50013"</span>
</code></pre></div></p>
<blockquote>
<p>Configure peers to use smpc, peers are configured as the listening address of all clients, and the first address is the listening address of the client</p>
</blockquote>
<p>Open another terminal and start the second client:
<div class="highlight"><pre><span></span><code><a href="#__codelineno-5-1" id="__codelineno-5-1" name="__codelineno-5-1"></a>python quickstart_pytorch.py --name client02 --epochs <span class="m">2</span>  --server <span class="s2">"0.0.0.0:50001"</span> --peers <span class="s2">"0.0.0.0:50013;0.0.0.0:50012"</span>
</code></pre></div></p>
<blockquote>
<p>Configure peers to use smpc, peers are configured as the listening address of all clients, and the first address is the listening address of the client</p>
</blockquote>
<p>After both clients are ready and started, we can see log messages similar to the following on either client terminal:
<div class="highlight"><pre><span></span><code><a href="#__codelineno-6-1" id="__codelineno-6-1" name="__codelineno-6-1"></a>Namespace(name='client1', epochs=10, server='0.0.0.0:50001', enable_ll=0, peers='0.0.0.0:50012;0.0.0.0:50013', cert=None)
<a href="#__codelineno-6-2" id="__codelineno-6-2" name="__codelineno-6-2"></a>device: cpu
<a href="#__codelineno-6-3" id="__codelineno-6-3" name="__codelineno-6-3"></a>2022-08-08 19:39:37.971 | INFO     | iflearner.business.homo.train_client:run:89 - register to server
<a href="#__codelineno-6-4" id="__codelineno-6-4" name="__codelineno-6-4"></a>2022-08-08 19:39:37.976 | INFO     | iflearner.communication.homo.homo_client:transport:59 - OUT: message type: msg_register, time: 4.347216000000209ms
<a href="#__codelineno-6-5" id="__codelineno-6-5" name="__codelineno-6-5"></a>2022-08-08 19:39:37.977 | INFO     | iflearner.business.homo.train_client:run:106 - use strategy: FedAvg
<a href="#__codelineno-6-6" id="__codelineno-6-6" name="__codelineno-6-6"></a>2022-08-08 19:39:37.980 | INFO     | iflearner.communication.peer.peer_client:get_DH_public_key:43 - Public key: b'\x01\x01\xd0\xf2\xa5\xc0-\x7f\x1b\x88\xcb\xc8\\\x91Ra,4\n\xd4]\x97\x99zs\xae7\x1cK]]\x0c\x06\x85\xa1\xb5\x82\x03.\x9a\xe0m\xa3&gt;#\xf7(\xb3x\x89m\xfa\xfbu\x9ca\x95\xf4\x80GA\xd8z\x8fKs\xe0\x98\xe3\x7fX.\xe2Ej\x04c\x08\xcf\xdeF\'\xcc("@q[\xa5\xdf\xb4#\x1c\xd6\xd8\xd1\x05?\x06tO\xfa~Z\x12\x14\x1e\xba\xbe\xaa\xe5/}\xb1Y\xde]\xd8\\\x17\x9cE\xf3Z\xae(\xbfDsf'
<a href="#__codelineno-6-7" id="__codelineno-6-7" name="__codelineno-6-7"></a>2022-08-08 19:39:37.983 | INFO     | iflearner.business.homo.train_client:do_smpc:73 - secret: 122099796455175621216112096188958830464477667871351715488133066776583905683428683953037290811910449486061004359077608812182806437003480898524406977052511968565063977753455848242565116696939311359584774021461025748485006418803112297959930199282888061745382056940467943791248215701671956530776589875636959329985, type: &lt;class 'str'&gt;
<a href="#__codelineno-6-8" id="__codelineno-6-8" name="__codelineno-6-8"></a>2022-08-08 19:39:37.988 | INFO     | iflearner.communication.peer.peer_client:get_SMPC_random_key:56 - Random float: 0.6339090663897411
<a href="#__codelineno-6-9" id="__codelineno-6-9" name="__codelineno-6-9"></a>2022-08-08 19:39:37.988 | INFO     | iflearner.business.homo.train_client:do_smpc:77 - random value: 0.6339090663897411
<a href="#__codelineno-6-10" id="__codelineno-6-10" name="__codelineno-6-10"></a>2022-08-08 19:39:48.296 | INFO     | iflearner.communication.peer.peer_server:send:46 - IN: party: client2, message type: msg_dh_public_key
<a href="#__codelineno-6-11" id="__codelineno-6-11" name="__codelineno-6-11"></a>2022-08-08 19:39:48.298 | INFO     | iflearner.communication.peer.peer_server:send:46 - IN: party: client2, message type: msg_smpc_random_key
<a href="#__codelineno-6-12" id="__codelineno-6-12" name="__codelineno-6-12"></a>2022-08-08 19:39:48.298 | INFO     | iflearner.communication.peer.peer_server:send:56 - Party: client2, Random float: 0.3922334767649399
<a href="#__codelineno-6-13" id="__codelineno-6-13" name="__codelineno-6-13"></a>2022-08-08 19:39:49.023 | INFO     | iflearner.business.homo.train_client:do_smpc:80 - sum all random values: 0.24167558962480118
<a href="#__codelineno-6-14" id="__codelineno-6-14" name="__codelineno-6-14"></a>2022-08-08 19:39:49.025 | INFO     | iflearner.business.homo.train_client:run:139 - report client ready
<a href="#__codelineno-6-15" id="__codelineno-6-15" name="__codelineno-6-15"></a>2022-08-08 19:39:49.027 | INFO     | iflearner.communication.homo.homo_client:transport:59 - OUT: message type: msg_client_ready, time: 2.0064270000013096ms
<a href="#__codelineno-6-16" id="__codelineno-6-16" name="__codelineno-6-16"></a>2022-08-08 19:39:50.030 | INFO     | iflearner.communication.homo.homo_client:notice:94 - IN: party: message type: msg_notify_training, time: 1.7326500000010014ms
<a href="#__codelineno-6-17" id="__codelineno-6-17" name="__codelineno-6-17"></a>2022-08-08 19:39:51.033 | INFO     | iflearner.business.homo.train_client:run:149 - ----- fit &lt;FT&gt; -----
<a href="#__codelineno-6-18" id="__codelineno-6-18" name="__codelineno-6-18"></a>Epoch: 1, the size of training dataset: 60000, batch size: 938
<a href="#__codelineno-6-19" id="__codelineno-6-19" name="__codelineno-6-19"></a>2022-08-08 19:40:20.664 | INFO     | iflearner.business.homo.train_client:run:167 - ----- evaluate &lt;FT&gt; -----
<a href="#__codelineno-6-20" id="__codelineno-6-20" name="__codelineno-6-20"></a>The size of testing dataset: 10000
<a href="#__codelineno-6-21" id="__codelineno-6-21" name="__codelineno-6-21"></a>Test set: Average loss: 0.1058, Accuracy: 9694/10000 (96.94%)
<a href="#__codelineno-6-22" id="__codelineno-6-22" name="__codelineno-6-22"></a>2022-08-08 19:40:23.830 | INFO     | iflearner.business.homo.train_client:run:178 - ----- get &lt;FT&gt; -----
<a href="#__codelineno-6-23" id="__codelineno-6-23" name="__codelineno-6-23"></a>2022-08-08 19:40:23.858 | INFO     | iflearner.communication.homo.homo_client:transport:59 - OUT: message type: msg_upload_param, time: 17.50900600000449ms
<a href="#__codelineno-6-24" id="__codelineno-6-24" name="__codelineno-6-24"></a>2022-08-08 19:40:24.168 | INFO     | iflearner.communication.homo.homo_client:notice:94 - IN: party: message type: msg_aggregate_result, time: 10.504099000002043ms
<a href="#__codelineno-6-25" id="__codelineno-6-25" name="__codelineno-6-25"></a>2022-08-08 19:40:24.862 | INFO     | iflearner.business.homo.train_client:run:221 - ----- set -----
<a href="#__codelineno-6-26" id="__codelineno-6-26" name="__codelineno-6-26"></a>2022-08-08 19:40:24.865 | INFO     | iflearner.communication.homo.homo_client:transport:59 - OUT: message type: msg_client_ready, time: 1.2220939999991742ms
<a href="#__codelineno-6-27" id="__codelineno-6-27" name="__codelineno-6-27"></a>2022-08-08 19:40:25.173 | INFO     | iflearner.communication.homo.homo_client:notice:94 - IN: party: message type: msg_notify_training, time: 1.2624359999975354ms
<a href="#__codelineno-6-28" id="__codelineno-6-28" name="__codelineno-6-28"></a>2022-08-08 19:40:25.871 | INFO     | iflearner.business.homo.train_client:run:149 - ----- fit &lt;FT&gt; -----
<a href="#__codelineno-6-29" id="__codelineno-6-29" name="__codelineno-6-29"></a>Epoch: 2, the size of training dataset: 60000, batch size: 938
<a href="#__codelineno-6-30" id="__codelineno-6-30" name="__codelineno-6-30"></a>2022-08-08 19:41:00.230 | INFO     | iflearner.business.homo.train_client:run:167 - ----- evaluate &lt;FT&gt; -----
<a href="#__codelineno-6-31" id="__codelineno-6-31" name="__codelineno-6-31"></a>The size of testing dataset: 10000
<a href="#__codelineno-6-32" id="__codelineno-6-32" name="__codelineno-6-32"></a>Test set: Average loss: 0.0998, Accuracy: 9726/10000 (97.26%)
<a href="#__codelineno-6-33" id="__codelineno-6-33" name="__codelineno-6-33"></a>2022-08-08 19:41:03.992 | INFO     | iflearner.business.homo.train_client:run:178 - ----- get &lt;FT&gt; -----
<a href="#__codelineno-6-34" id="__codelineno-6-34" name="__codelineno-6-34"></a>2022-08-08 19:41:04.020 | INFO     | iflearner.communication.homo.homo_client:transport:59 - OUT: message type: msg_upload_param, time: 17.794709000000353ms
<a href="#__codelineno-6-35" id="__codelineno-6-35" name="__codelineno-6-35"></a>2022-08-08 19:41:04.367 | INFO     | iflearner.communication.homo.homo_client:notice:94 - IN: party: message type: msg_aggregate_result, time: 9.483094000003689ms
<a href="#__codelineno-6-36" id="__codelineno-6-36" name="__codelineno-6-36"></a>2022-08-08 19:41:05.024 | INFO     | iflearner.business.homo.train_client:run:221 - ----- set -----
<a href="#__codelineno-6-37" id="__codelineno-6-37" name="__codelineno-6-37"></a>2022-08-08 19:41:05.027 | INFO     | iflearner.communication.homo.homo_client:transport:59 - OUT: message type: msg_client_ready, time: 1.9964000000101123ms
<a href="#__codelineno-6-38" id="__codelineno-6-38" name="__codelineno-6-38"></a>2022-08-08 19:41:05.374 | INFO     | iflearner.communication.homo.homo_client:notice:94 - IN: party: message type: msg_notify_training, time: 1.6533630000026278ms
<a href="#__codelineno-6-39" id="__codelineno-6-39" name="__codelineno-6-39"></a>2022-08-08 19:41:06.032 | INFO     | iflearner.business.homo.train_client:run:149 - ----- fit &lt;FT&gt; -----
<a href="#__codelineno-6-40" id="__codelineno-6-40" name="__codelineno-6-40"></a>Epoch: 3, the size of training dataset: 60000, batch size: 938
<a href="#__codelineno-6-41" id="__codelineno-6-41" name="__codelineno-6-41"></a>2022-08-08 19:41:33.934 | INFO     | iflearner.business.homo.train_client:run:167 - ----- evaluate &lt;FT&gt; -----
<a href="#__codelineno-6-42" id="__codelineno-6-42" name="__codelineno-6-42"></a>The size of testing dataset: 10000
<a href="#__codelineno-6-43" id="__codelineno-6-43" name="__codelineno-6-43"></a>Test set: Average loss: 0.0871, Accuracy: 9743/10000 (97.43%)
<a href="#__codelineno-6-44" id="__codelineno-6-44" name="__codelineno-6-44"></a>2022-08-08 19:41:37.425 | INFO     | iflearner.business.homo.train_client:run:178 - ----- get &lt;FT&gt; -----
<a href="#__codelineno-6-45" id="__codelineno-6-45" name="__codelineno-6-45"></a>2022-08-08 19:41:37.492 | INFO     | iflearner.communication.homo.homo_client:transport:59 - OUT: message type: msg_upload_param, time: 18.108728000001406ms
<a href="#__codelineno-6-46" id="__codelineno-6-46" name="__codelineno-6-46"></a>2022-08-08 19:41:37.514 | INFO     | iflearner.communication.homo.homo_client:notice:94 - IN: party: message type: msg_aggregate_result, time: 8.546628999994255ms
<a href="#__codelineno-6-47" id="__codelineno-6-47" name="__codelineno-6-47"></a>2022-08-08 19:41:38.496 | INFO     | iflearner.business.homo.train_client:run:221 - ----- set -----
<a href="#__codelineno-6-48" id="__codelineno-6-48" name="__codelineno-6-48"></a>2022-08-08 19:41:38.498 | INFO     | iflearner.communication.homo.homo_client:transport:59 - OUT: message type: msg_client_ready, time: 1.2796400000070207ms
<a href="#__codelineno-6-49" id="__codelineno-6-49" name="__codelineno-6-49"></a>2022-08-08 19:41:38.519 | INFO     | iflearner.communication.homo.homo_client:notice:94 - IN: party: message type: msg_notify_training, time: 0.9813249999979234ms
<a href="#__codelineno-6-50" id="__codelineno-6-50" name="__codelineno-6-50"></a>2022-08-08 19:41:39.503 | INFO     | iflearner.business.homo.train_client:run:149 - ----- fit &lt;FT&gt; -----
<a href="#__codelineno-6-51" id="__codelineno-6-51" name="__codelineno-6-51"></a>Epoch: 4, the size of training dataset: 60000, batch size: 938
<a href="#__codelineno-6-52" id="__codelineno-6-52" name="__codelineno-6-52"></a>2022-08-08 19:42:12.085 | INFO     | iflearner.business.homo.train_client:run:167 - ----- evaluate &lt;FT&gt; -----
<a href="#__codelineno-6-53" id="__codelineno-6-53" name="__codelineno-6-53"></a>The size of testing dataset: 10000
<a href="#__codelineno-6-54" id="__codelineno-6-54" name="__codelineno-6-54"></a>Test set: Average loss: 0.0989, Accuracy: 9705/10000 (97.05%)
<a href="#__codelineno-6-55" id="__codelineno-6-55" name="__codelineno-6-55"></a>2022-08-08 19:42:15.499 | INFO     | iflearner.business.homo.train_client:run:178 - ----- get &lt;FT&gt; -----
<a href="#__codelineno-6-56" id="__codelineno-6-56" name="__codelineno-6-56"></a>2022-08-08 19:42:15.513 | INFO     | iflearner.communication.homo.homo_client:transport:59 - OUT: message type: msg_upload_param, time: 2.581355999978996ms
<a href="#__codelineno-6-57" id="__codelineno-6-57" name="__codelineno-6-57"></a>2022-08-08 19:42:15.694 | INFO     | iflearner.communication.homo.homo_client:notice:94 - IN: party: message type: msg_aggregate_result, time: 8.077353999993875ms
<a href="#__codelineno-6-58" id="__codelineno-6-58" name="__codelineno-6-58"></a>2022-08-08 19:42:16.517 | INFO     | iflearner.business.homo.train_client:run:221 - ----- set -----
<a href="#__codelineno-6-59" id="__codelineno-6-59" name="__codelineno-6-59"></a>2022-08-08 19:42:16.519 | INFO     | iflearner.communication.homo.homo_client:transport:59 - OUT: message type: msg_client_ready, time: 1.3156910000020616ms
<a href="#__codelineno-6-60" id="__codelineno-6-60" name="__codelineno-6-60"></a>2022-08-08 19:42:16.701 | INFO     | iflearner.communication.homo.homo_client:notice:94 - IN: party: message type: msg_notify_training, time: 2.0472559999973328ms
<a href="#__codelineno-6-61" id="__codelineno-6-61" name="__codelineno-6-61"></a>2022-08-08 19:42:17.524 | INFO     | iflearner.business.homo.train_client:run:149 - ----- fit &lt;FT&gt; -----
<a href="#__codelineno-6-62" id="__codelineno-6-62" name="__codelineno-6-62"></a>Epoch: 5, the size of training dataset: 60000, batch size: 938
<a href="#__codelineno-6-63" id="__codelineno-6-63" name="__codelineno-6-63"></a>2022-08-08 19:42:53.300 | INFO     | iflearner.business.homo.train_client:run:167 - ----- evaluate &lt;FT&gt; -----
<a href="#__codelineno-6-64" id="__codelineno-6-64" name="__codelineno-6-64"></a>The size of testing dataset: 10000
<a href="#__codelineno-6-65" id="__codelineno-6-65" name="__codelineno-6-65"></a>Test set: Average loss: 0.0639, Accuracy: 9806/10000 (98.06%)
<a href="#__codelineno-6-66" id="__codelineno-6-66" name="__codelineno-6-66"></a>2022-08-08 19:42:56.654 | INFO     | iflearner.business.homo.train_client:run:178 - ----- get &lt;FT&gt; -----
<a href="#__codelineno-6-67" id="__codelineno-6-67" name="__codelineno-6-67"></a>2022-08-08 19:42:56.667 | INFO     | iflearner.communication.homo.homo_client:transport:59 - OUT: message type: msg_upload_param, time: 1.813790000028348ms
<a href="#__codelineno-6-68" id="__codelineno-6-68" name="__codelineno-6-68"></a>2022-08-08 19:42:56.892 | INFO     | iflearner.communication.homo.homo_client:notice:94 - IN: party: message type: msg_aggregate_result, time: 7.262933999982124ms
<a href="#__codelineno-6-69" id="__codelineno-6-69" name="__codelineno-6-69"></a>2022-08-08 19:42:57.672 | INFO     | iflearner.business.homo.train_client:run:221 - ----- set -----
<a href="#__codelineno-6-70" id="__codelineno-6-70" name="__codelineno-6-70"></a>2022-08-08 19:42:57.675 | INFO     | iflearner.communication.homo.homo_client:transport:59 - OUT: message type: msg_client_ready, time: 1.5553380000028483ms
<a href="#__codelineno-6-71" id="__codelineno-6-71" name="__codelineno-6-71"></a>2022-08-08 19:42:57.898 | INFO     | iflearner.communication.homo.homo_client:notice:94 - IN: party: message type: msg_notify_training, time: 1.6520599999978458ms
<a href="#__codelineno-6-72" id="__codelineno-6-72" name="__codelineno-6-72"></a>2022-08-08 19:42:58.679 | INFO     | iflearner.business.homo.train_client:run:149 - ----- fit &lt;FT&gt; -----
<a href="#__codelineno-6-73" id="__codelineno-6-73" name="__codelineno-6-73"></a>Epoch: 6, the size of training dataset: 60000, batch size: 938
<a href="#__codelineno-6-74" id="__codelineno-6-74" name="__codelineno-6-74"></a>2022-08-08 19:43:26.257 | INFO     | iflearner.business.homo.train_client:run:167 - ----- evaluate &lt;FT&gt; -----
<a href="#__codelineno-6-75" id="__codelineno-6-75" name="__codelineno-6-75"></a>The size of testing dataset: 10000
<a href="#__codelineno-6-76" id="__codelineno-6-76" name="__codelineno-6-76"></a>Test set: Average loss: 0.0753, Accuracy: 9787/10000 (97.87%)
<a href="#__codelineno-6-77" id="__codelineno-6-77" name="__codelineno-6-77"></a>2022-08-08 19:43:30.128 | INFO     | iflearner.business.homo.train_client:run:178 - ----- get &lt;FT&gt; -----
<a href="#__codelineno-6-78" id="__codelineno-6-78" name="__codelineno-6-78"></a>2022-08-08 19:43:30.143 | INFO     | iflearner.communication.homo.homo_client:transport:59 - OUT: message type: msg_upload_param, time: 2.0744939999985945ms
<a href="#__codelineno-6-79" id="__codelineno-6-79" name="__codelineno-6-79"></a>2022-08-08 19:43:31.048 | INFO     | iflearner.communication.homo.homo_client:notice:94 - IN: party: message type: msg_aggregate_result, time: 9.83907899998826ms
<a href="#__codelineno-6-80" id="__codelineno-6-80" name="__codelineno-6-80"></a>2022-08-08 19:43:31.148 | INFO     | iflearner.business.homo.train_client:run:221 - ----- set -----
<a href="#__codelineno-6-81" id="__codelineno-6-81" name="__codelineno-6-81"></a>2022-08-08 19:43:31.151 | INFO     | iflearner.communication.homo.homo_client:transport:59 - OUT: message type: msg_client_ready, time: 2.054303000022628ms
<a href="#__codelineno-6-82" id="__codelineno-6-82" name="__codelineno-6-82"></a>2022-08-08 19:43:32.055 | INFO     | iflearner.communication.homo.homo_client:notice:94 - IN: party: message type: msg_notify_training, time: 1.705947000004926ms
<a href="#__codelineno-6-83" id="__codelineno-6-83" name="__codelineno-6-83"></a>2022-08-08 19:43:32.153 | INFO     | iflearner.business.homo.train_client:run:149 - ----- fit &lt;FT&gt; -----
<a href="#__codelineno-6-84" id="__codelineno-6-84" name="__codelineno-6-84"></a>Epoch: 7, the size of training dataset: 60000, batch size: 938
<a href="#__codelineno-6-85" id="__codelineno-6-85" name="__codelineno-6-85"></a>2022-08-08 19:43:58.396 | INFO     | iflearner.business.homo.train_client:run:167 - ----- evaluate &lt;FT&gt; -----
<a href="#__codelineno-6-86" id="__codelineno-6-86" name="__codelineno-6-86"></a>The size of testing dataset: 10000
<a href="#__codelineno-6-87" id="__codelineno-6-87" name="__codelineno-6-87"></a>Test set: Average loss: 0.0736, Accuracy: 9768/10000 (97.68%)
<a href="#__codelineno-6-88" id="__codelineno-6-88" name="__codelineno-6-88"></a>2022-08-08 19:44:01.113 | INFO     | iflearner.business.homo.train_client:run:178 - ----- get &lt;FT&gt; -----
<a href="#__codelineno-6-89" id="__codelineno-6-89" name="__codelineno-6-89"></a>2022-08-08 19:44:01.125 | INFO     | iflearner.communication.homo.homo_client:transport:59 - OUT: message type: msg_upload_param, time: 1.890878999972756ms
<a href="#__codelineno-6-90" id="__codelineno-6-90" name="__codelineno-6-90"></a>2022-08-08 19:44:02.184 | INFO     | iflearner.communication.homo.homo_client:notice:94 - IN: party: message type: msg_aggregate_result, time: 9.515048000025672ms
<a href="#__codelineno-6-91" id="__codelineno-6-91" name="__codelineno-6-91"></a>2022-08-08 19:44:03.132 | INFO     | iflearner.business.homo.train_client:run:221 - ----- set -----
<a href="#__codelineno-6-92" id="__codelineno-6-92" name="__codelineno-6-92"></a>2022-08-08 19:44:03.135 | INFO     | iflearner.communication.homo.homo_client:transport:59 - OUT: message type: msg_client_ready, time: 1.91251899997269ms
<a href="#__codelineno-6-93" id="__codelineno-6-93" name="__codelineno-6-93"></a>2022-08-08 19:44:03.188 | INFO     | iflearner.communication.homo.homo_client:notice:94 - IN: party: message type: msg_notify_training, time: 1.6274970000154099ms
<a href="#__codelineno-6-94" id="__codelineno-6-94" name="__codelineno-6-94"></a>2022-08-08 19:44:04.140 | INFO     | iflearner.business.homo.train_client:run:149 - ----- fit &lt;FT&gt; -----
<a href="#__codelineno-6-95" id="__codelineno-6-95" name="__codelineno-6-95"></a>Epoch: 8, the size of training dataset: 60000, batch size: 938
<a href="#__codelineno-6-96" id="__codelineno-6-96" name="__codelineno-6-96"></a>2022-08-08 19:44:34.161 | INFO     | iflearner.business.homo.train_client:run:167 - ----- evaluate &lt;FT&gt; -----
<a href="#__codelineno-6-97" id="__codelineno-6-97" name="__codelineno-6-97"></a>The size of testing dataset: 10000
<a href="#__codelineno-6-98" id="__codelineno-6-98" name="__codelineno-6-98"></a>Test set: Average loss: 0.0646, Accuracy: 9801/10000 (98.01%)
<a href="#__codelineno-6-99" id="__codelineno-6-99" name="__codelineno-6-99"></a>2022-08-08 19:44:37.132 | INFO     | iflearner.business.homo.train_client:run:178 - ----- get &lt;FT&gt; -----
<a href="#__codelineno-6-100" id="__codelineno-6-100" name="__codelineno-6-100"></a>2022-08-08 19:44:37.151 | INFO     | iflearner.communication.homo.homo_client:transport:59 - OUT: message type: msg_upload_param, time: 12.143503999993754ms
<a href="#__codelineno-6-101" id="__codelineno-6-101" name="__codelineno-6-101"></a>2022-08-08 19:44:37.328 | INFO     | iflearner.communication.homo.homo_client:notice:94 - IN: party: message type: msg_aggregate_result, time: 7.2212239999771555ms
<a href="#__codelineno-6-102" id="__codelineno-6-102" name="__codelineno-6-102"></a>2022-08-08 19:44:38.153 | INFO     | iflearner.business.homo.train_client:run:221 - ----- set -----
<a href="#__codelineno-6-103" id="__codelineno-6-103" name="__codelineno-6-103"></a>2022-08-08 19:44:38.156 | INFO     | iflearner.communication.homo.homo_client:transport:59 - OUT: message type: msg_client_ready, time: 1.8954930000063541ms
<a href="#__codelineno-6-104" id="__codelineno-6-104" name="__codelineno-6-104"></a>2022-08-08 19:44:38.335 | INFO     | iflearner.communication.homo.homo_client:notice:94 - IN: party: message type: msg_notify_training, time: 2.6670950000493576ms
<a href="#__codelineno-6-105" id="__codelineno-6-105" name="__codelineno-6-105"></a>2022-08-08 19:44:39.161 | INFO     | iflearner.business.homo.train_client:run:149 - ----- fit &lt;FT&gt; -----
<a href="#__codelineno-6-106" id="__codelineno-6-106" name="__codelineno-6-106"></a>Epoch: 9, the size of training dataset: 60000, batch size: 938
<a href="#__codelineno-6-107" id="__codelineno-6-107" name="__codelineno-6-107"></a>2022-08-08 19:45:04.166 | INFO     | iflearner.business.homo.train_client:run:167 - ----- evaluate &lt;FT&gt; -----
<a href="#__codelineno-6-108" id="__codelineno-6-108" name="__codelineno-6-108"></a>The size of testing dataset: 10000
<a href="#__codelineno-6-109" id="__codelineno-6-109" name="__codelineno-6-109"></a>Test set: Average loss: 0.0694, Accuracy: 9781/10000 (97.81%)
<a href="#__codelineno-6-110" id="__codelineno-6-110" name="__codelineno-6-110"></a>2022-08-08 19:45:06.821 | INFO     | iflearner.business.homo.train_client:run:178 - ----- get &lt;FT&gt; -----
<a href="#__codelineno-6-111" id="__codelineno-6-111" name="__codelineno-6-111"></a>2022-08-08 19:45:06.841 | INFO     | iflearner.communication.homo.homo_client:transport:59 - OUT: message type: msg_upload_param, time: 12.79627700000674ms
<a href="#__codelineno-6-112" id="__codelineno-6-112" name="__codelineno-6-112"></a>2022-08-08 19:45:07.453 | INFO     | iflearner.communication.homo.homo_client:notice:94 - IN: party: message type: msg_aggregate_result, time: 9.497581000005084ms
<a href="#__codelineno-6-113" id="__codelineno-6-113" name="__codelineno-6-113"></a>2022-08-08 19:45:07.846 | INFO     | iflearner.business.homo.train_client:run:221 - ----- set -----
<a href="#__codelineno-6-114" id="__codelineno-6-114" name="__codelineno-6-114"></a>2022-08-08 19:45:07.848 | INFO     | iflearner.communication.homo.homo_client:transport:59 - OUT: message type: msg_client_ready, time: 1.1865850000276623ms
<a href="#__codelineno-6-115" id="__codelineno-6-115" name="__codelineno-6-115"></a>2022-08-08 19:45:09.465 | INFO     | iflearner.communication.homo.homo_client:notice:94 - IN: party: message type: msg_notify_training, time: 1.6427019999696313ms
<a href="#__codelineno-6-116" id="__codelineno-6-116" name="__codelineno-6-116"></a>2022-08-08 19:45:09.858 | INFO     | iflearner.business.homo.train_client:run:149 - ----- fit &lt;FT&gt; -----
<a href="#__codelineno-6-117" id="__codelineno-6-117" name="__codelineno-6-117"></a>Epoch: 10, the size of training dataset: 60000, batch size: 938
<a href="#__codelineno-6-118" id="__codelineno-6-118" name="__codelineno-6-118"></a>2022-08-08 19:45:48.696 | INFO     | iflearner.business.homo.train_client:run:167 - ----- evaluate &lt;FT&gt; -----
<a href="#__codelineno-6-119" id="__codelineno-6-119" name="__codelineno-6-119"></a>The size of testing dataset: 10000
<a href="#__codelineno-6-120" id="__codelineno-6-120" name="__codelineno-6-120"></a>Test set: Average loss: 0.0615, Accuracy: 9814/10000 (98.14%)
<a href="#__codelineno-6-121" id="__codelineno-6-121" name="__codelineno-6-121"></a>2022-08-08 19:45:53.514 | INFO     | iflearner.business.homo.train_client:run:178 - ----- get &lt;FT&gt; -----
<a href="#__codelineno-6-122" id="__codelineno-6-122" name="__codelineno-6-122"></a>label: FT, points: ([1, 2, 3, 4, 5, 6, 7, 8, 9, 10], [0.10584523560330272, 0.09984834497272968, 0.0871084996862337, 0.09891319364532829, 0.063905619766374, 0.07528823107918725, 0.07361029261836957, 0.06460160582875542, 0.0694242621988058, 0.06149101790403947])
<a href="#__codelineno-6-123" id="__codelineno-6-123" name="__codelineno-6-123"></a>label: LT, points: ([1], [0.10584523560330272])
<a href="#__codelineno-6-124" id="__codelineno-6-124" name="__codelineno-6-124"></a>label: FT, points: ([1, 2, 3, 4, 5, 6, 7, 8, 9, 10], [0.9694, 0.9726, 0.9743, 0.9705, 0.9806, 0.9787, 0.9768, 0.9801, 0.9781, 0.9814])
<a href="#__codelineno-6-125" id="__codelineno-6-125" name="__codelineno-6-125"></a>label: LT, points: ([1], [0.9694])
<a href="#__codelineno-6-126" id="__codelineno-6-126" name="__codelineno-6-126"></a>2022-08-08 19:45:54.253 | INFO     | iflearner.communication.homo.homo_client:transport:59 - OUT: message type: msg_complete, time: 2.060518000007505ms
</code></pre></div>
congratulations! You have successfully built and run your first federated learning system. The complete source code reference for this example <a href="https://github.com/iflytek/iflearner/tree/main/examples/homo/quickstart_smpc">Quickstart_SMPC</a>.</p>
</article>
</div>
</div>
<a class="md-top md-icon" data-md-component="top" hidden="" href="#">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"></path></svg>
            Back to top
          </a>
</main>
<footer class="md-footer">
<nav aria-label="Footer" class="md-footer__inner md-grid">
<a aria-label="Previous: Quickstart Keras" class="md-footer__link md-footer__link--prev" href="../quickstart_keras/" rel="prev">
<div class="md-footer__button md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"></path></svg>
</div>
<div class="md-footer__title">
<div class="md-ellipsis">
<span class="md-footer__direction">
                Previous
              </span>
              Quickstart Keras
            </div>
</div>
</a>
<a aria-label="Next: Quickstart Opacus" class="md-footer__link md-footer__link--next" href="../quickstart_opacus/" rel="next">
<div class="md-footer__title">
<div class="md-ellipsis">
<span class="md-footer__direction">
                Next
              </span>
              Quickstart Opacus
            </div>
</div>
<div class="md-footer__button md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"></path></svg>
</div>
</a>
</nav>
<div class="md-footer-meta md-typeset">
<div class="md-footer-meta__inner md-grid">
<div class="md-copyright">
<div class="md-copyright__highlight">
      Copyright © 2022 <a a="" by="" iflytek="" powered="" 版权所有<="">
</a></div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" rel="noopener" target="_blank">
      Material for MkDocs
    </a>
</div>
<div class="md-social">
<a class="md-social__link" href="https://github.com/iflytek/iflearner" rel="noopener" target="_blank" title="github.com">
<svg viewbox="0 0 496 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"></path></svg>
</a>
</div>
</div>
</div>
</footer>
</div>
<div class="md-dialog" data-md-component="dialog">
<div class="md-dialog__inner md-typeset"></div>
</div>
<script id="__config" type="application/json">{"base": "../..", "features": ["navigation.tabs", "navigation.tracking", "navigation.indexes", "navigation.top", "search.suggest", "search.highlight", "search.share"], "search": "../../assets/javascripts/workers/search.b97dbffb.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
<script src="../../assets/javascripts/bundle.0238f547.min.js"></script>
<script src="../../assets/js/swagger-ui-bundle.js"></script>
</body>
</html>